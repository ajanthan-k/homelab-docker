services:

  radarr:
    image: ghcr.io/hotio/radarr:release-5.22.4.9896@sha256:873ee80721f2751275ef77c83224ba2ed59654d4ba07e81c219c87e28a4863ed
    container_name: radarr
    restart: unless-stopped
    ports:
      - 7878:7878
    environment:
      - PUID=${USER_PUID}
      - PGID=${USER_PGID}
      - TZ=Europe/London
      - UMASK=002
    volumes:
      - /etc/localtime:/etc/localtime:ro
      - ${DOCKER_PATH}/radarr:/config
      - ${DATA_PATH}:/data

  sonarr:
    image: ghcr.io/hotio/sonarr:release-4.0.14.2939@sha256:c5bf64948dd712f83c18f57370ec2fe71bbc37e042152a43ccf731976c6d3fcc
    container_name: sonarr
    restart: unless-stopped
    ports:
      - 8989:8989
    environment:
      - PUID=${USER_PUID}
      - PGID=${USER_PGID}
      - TZ=Europe/London
      - UMASK=002
    volumes:
      - /etc/localtime:/etc/localtime:ro
      - ${DOCKER_PATH}/sonarr:/config
      - ${DATA_PATH}:/data

  bazarr:
    image: ghcr.io/hotio/bazarr:release-1.5.1@sha256:fc8f42ffe6494e8045689a29380f82a23d9ac11497ee925a2c10ced583ca9df3
    container_name: bazarr
    restart: unless-stopped
    ports:
      - 6767:6767
    environment:
      - PUID=${USER_PUID}
      - PGID=${USER_PGID}
      - TZ=Europe/London
      - UMASK=002
    volumes:
      - /etc/localtime:/etc/localtime:ro
      - ${DOCKER_PATH}/bazarr/:/config
      - ${DATA_PATH}/media:/data/media

  prowlarr:
    image: ghcr.io/hotio/prowlarr:release-1.34.1.5021@sha256:19f89b5dbc1d4a06326400c9ffafddc4130835272f8e6ef803d622ba2f44b065
    container_name: prowlarr
    restart: unless-stopped
    ports:
      - 9696:9696
    environment:
      - PUID=${USER_PUID}
      - PGID=${USER_PGID}
      - UMASK=002
      - TZ=Europe/London
    volumes:
      - ${DOCKER_PATH}/prowlarr:/config:rw

  jellyfin:
    image: ghcr.io/hotio/jellyfin:release-10.10.7@sha256:755445856806e6344835da40536b8bc1b15f059a3165be399f959c5fcc941ccb
    container_name: jellyfin
    restart: unless-stopped
    ports:
      - 8096:8096
    environment:
      - PUID=${USER_PUID}
      - PGID=${USER_PGID}
      - TZ=Europe/London
      - UMASK=002
    volumes:
      - /etc/localtime:/etc/localtime:ro
      - ${DOCKER_PATH}/jellyfin:/config:rw
      - ${DATA_PATH}/media:/data/media:rw
    devices:                                        
      - /dev/dri:/dev/dri                      

  qbittorrent:
    image: ghcr.io/hotio/qbittorrent:legacy-4.3.9@sha256:34f3339ca8ffeb80c9b36e5d14e79886d791cca5d9c145452c32e438ce638150
    container_name: qbittorrent
    restart: unless-stopped
    ports:
      - 8080:8080
      - 50000:50000
    cap_add:
      - NET_ADMIN
#   devices:                              # Optional, uncomment if you use VPN
#     - /dev/net/tun:/dev/net/tun         # Optional, uncomment if you use VPN
    sysctls:
      - net.ipv4.conf.all.src_valid_mark=1
    environment:
      - PUID=${USER_PUID}
      - PGID=${USER_PGID}
      - TZ=Europe/London
      - UMASK=022
    volumes:
      - /etc/localtime:/etc/localtime:ro
      - ${DOCKER_PATH}/qbittorrent:/config:rw
      - ${DATA_PATH}/torrents:/data/torrents:rw

  autobrr:
    image: ghcr.io/autobrr/autobrr:v1.61.0@sha256:035adedf41dafe2a1409e0e39894f91db9af746ec23bd3f018b62f290ba3e4b4
    container_name: autobrr
    restart: unless-stopped
    ports:
      - 7474:7474
    user: ${USER_PUID}:${USER_PGID}
    environment:
      - TZ=Europe/London
    volumes:
      - ${DOCKER_PATH}/autobrr:/config

  omegabrr:
    image: ghcr.io/autobrr/omegabrr:v1.16.0@sha256:fe529c331217e0624c505a1aa47d2a089314e8a284d38a621135b848eeef64ad
    container_name: omegabrr
    restart: unless-stopped
    ports:
      - 7441:7441
    user: ${USER_PUID}:${USER_PGID}
    volumes:
      - ${DOCKER_PATH}/omegabrr:/config

  seasonpackarr:
    image: ghcr.io/nuxencs/seasonpackarr:v0.12.0@sha256:0a2f0d2adbf7b0f20f11a3bffa7297db04c131c88f4f1fa8c1855e72f63d1a1e
    container_name: seasonpackarr
    restart: unless-stopped
    user: ${USER_PUID}:${USER_PGID}
    ports:
      - 42069:42069
    environment:
      - SEASONPACKARR__SMART_MODE= true
      - SEASONPACKARR__SMART_MODE_THRESHOLD= 0.75
      - SEASONPACKARR__PARSE_TORRENT_FILE= true
    volumes:
      - ${DOCKER_PATH}/seasonpackarr:/config
      - ${DATA_PATH}/torrents:/data/torrents

networks:
  default:
    name: caddy_proxy
    external: true

####### Update Containers ##########
# docker compose pull
# docker compose up -d --remove-orphans
# docker image prune
