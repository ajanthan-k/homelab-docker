services:

  radarr:
    image: ghcr.io/hotio/radarr:release-5.15.1.9463@sha256:78425bed38867e6bb8b40ea64c411eb9e8308de9a15edac1b4762710a2554477
    container_name: radarr
    restart: unless-stopped
    ports:
      - 7878:7878
    environment:
      - PUID=${USER_PUID}
      - PGID=${USER_PGID}
      - TZ=Europe/London
      - UMASK=002
    volumes:
      - /etc/localtime:/etc/localtime:ro
      - ${DOCKER_PATH}/radarr:/config
      - ${DATA_PATH}:/data

  sonarr:
    image: ghcr.io/hotio/sonarr:release-4.0.11.2680@sha256:d8dcf6476d92f7b949d7b24a7bbe248296284a6526803a8405e806301893adc5
    container_name: sonarr
    restart: unless-stopped
    ports:
      - 8989:8989
    environment:
      - PUID=${USER_PUID}
      - PGID=${USER_PGID}
      - TZ=Europe/London
      - UMASK=002
    volumes:
      - /etc/localtime:/etc/localtime:ro
      - ${DOCKER_PATH}/sonarr:/config
      - ${DATA_PATH}:/data

  bazarr:
    image: ghcr.io/hotio/bazarr:release-1.4.5@sha256:78e7e2d5cffa81652998dd388f24349fd2db3a328e22b07115e7331cdf2ff785
    container_name: bazarr
    restart: unless-stopped
    ports:
      - 6767:6767
    environment:
      - PUID=${USER_PUID}
      - PGID=${USER_PGID}
      - TZ=Europe/London
      - UMASK=002
    volumes:
      - /etc/localtime:/etc/localtime:ro
      - ${DOCKER_PATH}/bazarr/:/config
      - ${DATA_PATH}/media:/data/media

  prowlarr:
    image: ghcr.io/hotio/prowlarr:release-1.27.0.4852@sha256:a9f48ed3ca7939e2544fd2ca514b168e04e088ad081a871b06c06bbee6deb9ac
    container_name: prowlarr
    restart: unless-stopped
    ports:
      - 9696:9696
    environment:
      - PUID=${USER_PUID}
      - PGID=${USER_PGID}
      - UMASK=002
      - TZ=Europe/London
    volumes:
      - ${DOCKER_PATH}/prowlarr:/config:rw

  jellyfin:
    image: ghcr.io/hotio/jellyfin:release-10.10.3@sha256:735d4078937fbb488cfd5edd2fd9190605a144624b5088d7dcccb122bfa66427
    container_name: jellyfin
    restart: unless-stopped
    ports:
      - 8096:8096
    environment:
      - PUID=${USER_PUID}
      - PGID=${USER_PGID}
      - TZ=Europe/London
      - UMASK=002
    volumes:
      - /etc/localtime:/etc/localtime:ro
      - ${DOCKER_PATH}/jellyfin:/config:rw
      - ${DATA_PATH}/media:/data/media:rw
    devices:                                        
      - /dev/dri:/dev/dri                      

  qbittorrent:
    image: ghcr.io/hotio/qbittorrent:legacy-4.3.9@sha256:5b1a1142d19a47ebb46c952be5abb458ea69a8d31d084d99ca1b9719559f62f8
    container_name: qbittorrent
    restart: unless-stopped
    ports:
      - 8080:8080
      - 50000:50000
    cap_add:
      - NET_ADMIN
#   devices:                              # Optional, uncomment if you use VPN
#     - /dev/net/tun:/dev/net/tun         # Optional, uncomment if you use VPN
    sysctls:
      - net.ipv4.conf.all.src_valid_mark=1
    environment:
      - PUID=${USER_PUID}
      - PGID=${USER_PGID}
      - TZ=Europe/London
      - UMASK=022
    volumes:
      - /etc/localtime:/etc/localtime:ro
      - ${DOCKER_PATH}/qbittorrent:/config:rw
      - ${DATA_PATH}/torrents:/data/torrents:rw

  autobrr:
    image: ghcr.io/autobrr/autobrr:v1.53.1@sha256:4b269242133127f82e87f1d7b75e04bc94ec4ca3f5993c5e846c6d51304c73e8
    container_name: autobrr
    restart: unless-stopped
    ports:
      - 7474:7474
    user: ${USER_PUID}:${USER_PGID}
    environment:
      - TZ=Europe/London
    volumes:
      - ${DOCKER_PATH}/autobrr:/config

  omegabrr:
    image: ghcr.io/autobrr/omegabrr:v1.16.0@sha256:fe529c331217e0624c505a1aa47d2a089314e8a284d38a621135b848eeef64ad
    container_name: omegabrr
    restart: unless-stopped
    ports:
      - 7441:7441
    user: ${USER_PUID}:${USER_PGID}
    volumes:
      - ${DOCKER_PATH}/omegabrr:/config

  seasonpackarr:
    image: ghcr.io/nuxencs/seasonpackarr:v0.11.0@sha256:661bd8a8f6b6eabc6958bc0cfedbb083e33b278689f60eb7eb8425e6d94f5b86
    container_name: seasonpackarr
    restart: unless-stopped
    user: ${USER_PUID}:${USER_PGID}
    ports:
      - 42069:42069
    environment:
      - SEASONPACKARR__SMART_MODE= true
      - SEASONPACKARR__SMART_MODE_THRESHOLD= 0.75
      - SEASONPACKARR__PARSE_TORRENT_FILE= true
    volumes:
      - ${DOCKER_PATH}/seasonpackarr:/config
      - ${DATA_PATH}/torrents:/data/torrents

networks:
  default:
    name: caddy_proxy
    external: true

####### Update Containers ##########
# docker compose pull
# docker compose up -d --remove-orphans
# docker image prune
