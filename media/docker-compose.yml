services:

  radarr:
    image: ghcr.io/hotio/radarr:release-5.14.0.9383@sha256:77c249a6b32ee896d9c11151626387aa417d2e70210171ce8ef977e0a2742304
    container_name: radarr
    restart: unless-stopped
    ports:
      - 7878:7878
    environment:
      - PUID=${USER_PUID}
      - PGID=${USER_PGID}
      - TZ=Europe/London
      - UMASK=002
    volumes:
      - /etc/localtime:/etc/localtime:ro
      - ${DOCKER_PATH}/radarr:/config
      - ${DATA_PATH}:/data

  sonarr:
    image: ghcr.io/hotio/sonarr:release-4.0.10.2544@sha256:9e6abd216ef48213afe8a30ddbe8a96b1aa29a0778395181e1eb4e0d7bb90820
    container_name: sonarr
    restart: unless-stopped
    ports:
      - 8989:8989
    environment:
      - PUID=${USER_PUID}
      - PGID=${USER_PGID}
      - TZ=Europe/London
      - UMASK=002
    volumes:
      - /etc/localtime:/etc/localtime:ro
      - ${DOCKER_PATH}/sonarr:/config
      - ${DATA_PATH}:/data

  bazarr:
    image: ghcr.io/hotio/bazarr:release-1.4.5@sha256:78e7e2d5cffa81652998dd388f24349fd2db3a328e22b07115e7331cdf2ff785
    container_name: bazarr
    restart: unless-stopped
    ports:
      - 6767:6767
    environment:
      - PUID=${USER_PUID}
      - PGID=${USER_PGID}
      - TZ=Europe/London
      - UMASK=002
    volumes:
      - /etc/localtime:/etc/localtime:ro
      - ${DOCKER_PATH}/bazarr/:/config
      - ${DATA_PATH}/media:/data/media

  prowlarr:
    image: ghcr.io/hotio/prowlarr:release-1.25.4.4818@sha256:239d961f36f7a7131195e7ff45c8f6b1b9a52b232f78c5fc2ed54f0fc154df0b
    container_name: prowlarr
    restart: unless-stopped
    ports:
      - 9696:9696
    environment:
      - PUID=${USER_PUID}
      - PGID=${USER_PGID}
      - UMASK=002
      - TZ=Europe/London
    volumes:
      - ${DOCKER_PATH}/prowlarr:/config:rw

  jellyfin:
    image: ghcr.io/hotio/jellyfin:release-10.10.2@sha256:0d7fa09889db1df589e3b7eb481c5d410adc30a150415d2ead68634159abe14b
    container_name: jellyfin
    restart: unless-stopped
    ports:
      - 8096:8096
    environment:
      - PUID=${USER_PUID}
      - PGID=${USER_PGID}
      - TZ=Europe/London
      - UMASK=002
    volumes:
      - /etc/localtime:/etc/localtime:ro
      - ${DOCKER_PATH}/jellyfin:/config:rw
      - ${DATA_PATH}/media:/data/media:rw
    devices:                                        
      - /dev/dri:/dev/dri                      

  qbittorrent:
    image: ghcr.io/hotio/qbittorrent:legacy-4.3.9@sha256:10b55928f5de7e8fa8de13dee4cdc8b24164d26738ff6ab8f0d081c343b07ae4
    container_name: qbittorrent
    restart: unless-stopped
    ports:
      - 8080:8080
      - 50000:50000
    cap_add:
      - NET_ADMIN
#   devices:                              # Optional, uncomment if you use VPN
#     - /dev/net/tun:/dev/net/tun         # Optional, uncomment if you use VPN
    sysctls:
      - net.ipv4.conf.all.src_valid_mark=1
    environment:
      - PUID=${USER_PUID}
      - PGID=${USER_PGID}
      - TZ=Europe/London
      - UMASK=022
    volumes:
      - /etc/localtime:/etc/localtime:ro
      - ${DOCKER_PATH}/qbittorrent:/config:rw
      - ${DATA_PATH}/torrents:/data/torrents:rw

  autobrr:
    image: ghcr.io/autobrr/autobrr:v1.50.0@sha256:6a6f23570ab6b418318ab12bf2558712714e2f243cf18b139afa414f8417e97d
    container_name: autobrr
    restart: unless-stopped
    ports:
      - 7474:7474
    user: ${USER_PUID}:${USER_PGID}
    environment:
      - TZ=Europe/London
    volumes:
      - ${DOCKER_PATH}/autobrr:/config

  omegabrr:
    image: ghcr.io/autobrr/omegabrr:v1.15.0@sha256:4f6099a76ff9d248e9f032e29c04a92b483f21456e46f3b01eb20399f4732ad0
    container_name: omegabrr
    restart: unless-stopped
    ports:
      - 7441:7441
    user: ${USER_PUID}:${USER_PGID}
    volumes:
      - ${DOCKER_PATH}/omegabrr:/config

  seasonpackarr:
    image: ghcr.io/nuxencs/seasonpackarr:v0.11.0@sha256:661bd8a8f6b6eabc6958bc0cfedbb083e33b278689f60eb7eb8425e6d94f5b86
    container_name: seasonpackarr
    restart: unless-stopped
    user: ${USER_PUID}:${USER_PGID}
    ports:
      - 42069:42069
    environment:
      - SEASONPACKARR__SMART_MODE= true
      - SEASONPACKARR__SMART_MODE_THRESHOLD= 0.75
      - SEASONPACKARR__PARSE_TORRENT_FILE= true
    volumes:
      - ${DOCKER_PATH}/seasonpackarr:/config
      - ${DATA_PATH}/torrents:/data/torrents

networks:
  default:
    name: caddy_proxy
    external: true

####### Update Containers ##########
# docker compose pull
# docker compose up -d --remove-orphans
# docker image prune
